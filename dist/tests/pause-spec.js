'use strict';var _require=require('botmaster-fulfill'),fulfillOutgoingWare=_require.fulfillOutgoingWare,_require2=require('botmaster-test'),botmaster=_require2.botmaster,telegramMock=_require2.telegramMock,respond=_require2.respond,actions=require('../');describe('pause',function(){var a,b;beforeEach(function(){return botmaster().then(function(c){b=telegramMock(c),a=c})}),it('should have a configurable wait time',function(c){var d=['one','two'];this.timeout(500),a.use('outgoing',fulfillOutgoingWare({actions:actions})),respond(a)(d.join('<pause wait=100 />')),a.on('error',function(e,f){return c(new Error('botmaster error: '+f))}),b.expect(d,c).sendUpdate('hi bob',function(e){e&&c(new Error('supertest error: '+e))})}),it('should have a configurable wait time and forgive those who pass a string',function(c){var d=['one','two'];this.timeout(500),a.use('outgoing',fulfillOutgoingWare({actions:actions})),respond(a)(d.join('<pause wait="100" />')),a.on('error',function(e,f){return c(new Error('botmaster error: '+f))}),b.expect(d,c).sendUpdate('hi bob',function(e){e&&c(new Error('supertest error: '+e))})}),it('should pass a simple 5 message test case',function(c){var d=['one','two','three','four','five'];this.timeout(1e3*d.length+100),a.use('outgoing',fulfillOutgoingWare({actions:actions})),respond(a)(d.join('<pause />')),a.on('error',function(e,f){return c(new Error('botmaster error: '+f))}),b.expect(d,c).sendUpdate('hi bob',function(e){e&&c(new Error('supertest error: '+e))})}),it('should pass a complex 5 message test case',function(c){var d=['It will cost \xA32.55.','You can pay (we hope so!) over Wi-Fi.','You can use an app (Download it <a href="http:www.site.com">HERE</a>).','To find out more click <a href="http:www.site.com">HERE</a>!','Till later!'];this.timeout(1e3*d.length+100),a.use('outgoing',fulfillOutgoingWare({actions:actions})),respond(a)(d.join('<pause />')),a.on('error',function(e,f){return c(new Error('botmaster error: '+f))}),b.expect(d,c).sendUpdate('hi bob',function(e){e&&c(new Error('supertest error: '+e))})}),it('should pass a complex 9 message test case',function(c){var d=['Ok, heres what you should do','1. Turn it on and off.','2. Delete stuff','3. Update your OS','4. Try stuff','5. Perform stuff <a href="http://site.come/ab"> HERE</a>.','Please ensure you back up your data first','and do not forget important stuff <a href=" http://site.com/a_FA_afc">HERE</a>.','Have I resolved resolved your issues?'];this.timeout(1e3*d.length+100),a.use('outgoing',fulfillOutgoingWare({actions:actions})),respond(a)(d.join('<pause />')),a.on('error',function(e,f){return c(new Error('botmaster error: '+f))}),b.expect(d,c).sendUpdate('hi bob',function(e){e&&c(new Error('supertest error: '+e))})}),afterEach(function(c){this.retries(4),process.nextTick(function(){b.cleanAll(),a.server.close(c)})})});